##这里记录一些图形学的原理，能记多少记多少

### 坐标的转换

从一个三维的建模坐标系到设备坐标的坐标变化的顺序：

```
graph LR
mc[建模坐标系]-->wc[世界坐标系]
wc-->vc[观察坐标系]
vc-->pc[投影坐标系]
pc-->nc[规范化坐标系]
nc-->dc[设备坐标系或称屏幕坐标系]
```

其中设备坐标系是二维的，因为我们只是创造了3D的效果，其实整体还是显示在二维的平面上的。


### 向量叉乘
```
v1 = (a1, b1, c1)
v2 = (a2, b2, c2)

i  j  k

a1 b1 c1

a2 b2 c2

v1 ✖️ v2 = (b1c2 - c1b2)i - (a1c2 - a2c1)j + (a1b2 - a2b1)k

就是计算三阶行列式的值

其中i,j,k为坐标系3个方向的单位向量
i = (1, 0, 0) j = (0, 1, 0) k = (0, 0, 1)
```

当两个向量叉乘的分向量为负值是，表示这两个向量为凹多边形大于180度内角的两条边。

### 内外测试（判断一个点在一个几何图形内部还是外部）

1. 奇偶规则， 用一条不经过图形顶点的射线穿过图形，如果射线和图形的边的交点个数为奇数，则点在图形内部，否则在图形外部。
2. 非零环绕数，用一条不经过顶点的射线穿过图形，初始化一个环绕数为0，当与射线相交的边从右向左穿过射线时，环绕数加1，否则减1，当环绕数非0时，点在图形内部，否则在图形外部。从左边穿过还是从右边穿过也是用叉乘来表示，用边向量乘以射线的向量。

### 前向面和后向面

平面方程为 Ax + By + Cz+ D = 0，其中N(A, B, C)为平面法向量。法向量和平面上任意一点P有
N·P = -D

任意点P(a, b, c)（不一定在平面上）代入方程，如果Aa + Bb + Cc + D > 0， 则为前向面 Aa + Bb + Cc + D < 0则为后向面，否则在平面上

### 贝塞尔曲线

依据几个点来确定的一条光滑的曲线称为贝塞尔曲线

贝塞尔曲线中分为两种点：

1. 贝塞尔必定通过的起止点，称为端点
2. 中间起到牵引作用，但不一定通过的点称为中间点

#### 二次贝塞尔曲线的公式

```
P = (1-t)^2P0 + 2(1-t)tP1 + t^2*P2 
```

其中P0为起始点，P1为中间点，P2为终止点，t为要求点的x坐标，P为要求点的y轴坐标

高阶贝塞尔曲线公式的系数满足杨辉三角
```
N=1:---------1
N=2:--------1 1
N=3:------1 2 1
N=4:-----1 3 3 1
N=5:---1 4 6 4 1
```

